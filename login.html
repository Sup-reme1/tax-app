<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Document</title>

    <link rel="stylesheet" href="login.css">

    <link

  rel="stylesheet"

  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"

/>

</head>

<body>

    <div class="container">

        <form>

        <h3>Sign in</h3>

<br> 

            <label for="email" style="font-weight: 700;font-size: 15px;">Email Address</label> <br> <br>

            <input id="email" type="email" placeholder="you@example"  class="tin" required>

<br> <br> <br>

            <!-- <label for="password" style="font-weight: 700;font-size: 15px;">Password</label> <br> <br>

            <input type="password" placeholder="Enter your password "  class="pin" required> -->

<div class="password-wrapper">

  <input type="password" id="password" placeholder="Enter your password">

  <i class="fa-solid fa-eye" id="togglePassword"></i>

</div>

            <div class="input">

                <div class="in">

                <input type="checkbox">

                <h5>Remember me</h5>

                </div>

               <h5><a href="#">Forget Password?</a></h5>

            </div>

            <br> <br> 

            <button id="submitbtn">Log in</button>

<br> <br> <br>

            <footer>

            Don't have an account? <a href="create-account.html">Create an account</a>

            </footer>

        </form>

    </div>

</body>

<script>
    alert("login page loaded");
  const password = document.getElementById("password");

  const toggle = document.getElementById("togglePassword");
  const btn = document.getElementById('submitbtn')

  toggle.addEventListener("click", () => {

    const isHidden = password.type === "password";

    // toggle input type

    password.type = isHidden ? "text" : "password";

    // toggle icons

    toggle.classList.toggle("fa-eye");

    toggle.classList.toggle("fa-eye-slash");
    

  });

  btn.addEventListener("click", async function(event) {
    event.preventDefault();
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;
    try {
        const response = await fetch("https://taxpal-weap.onrender.com/api/user/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                email: email,
                password: password
            })
        });

        if (response.ok) {
            const data = await response.json();
            console.log("Login successful:", data);
            // You can redirect the user or perform other actions here
        } 
        // setTimeout(() => {
        //     window.location.href = "dashboard.html";
        // }, 1000);

    } catch (error) {
        console.error("Error during login:", error);
    }
  }

);

</script>

</html>